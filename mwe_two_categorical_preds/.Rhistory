eco_model$aux$adata[grep("stratum", names(eco_model$aux$adata))]
eco_model$aux$adata[,grep("stratum", names(eco_model$aux$adata))]
grep("stratum", names(eco_model$aux$adata))
names(eco_model$aux$adata)
colnames(eco_model$aux$adata)
eco_model$aux$adata[,grep("stratum", colnames(eco_model$aux$adata))]
rowSums(eco_model$aux$adata[,grep("stratum", colnames(eco_model$aux$adata))])
eco_model$aux$res
eco_model$aux$res
summary(eco_model)
eco_model
table(ind$age)
cor(agg)
cor(agg[,c("p.ab", "p.owns")])
cor(cbind(agg[,c("p.ab", "p.owns")], edu_mat, age_mat))
cor(cbind(agg[,c("p.ab", "p.owns")], edu_mat)
)
eco_model
log(eco_model$ors.indiv)
log(eco_model$ors.ctx)
eco_model$aux$res
eco_model$aux$res$convergence
eco_model
eco_model$aux$res$convergence
eco_model
options(scipen = 12)
eco_model
log(eco_model$ors.indiv)
eco_model$aux$res$convergence
eco_model$aux$res$convergence
eco_model$aux$res$convergence
summary(eco_model)
eco_model
log(101)
summary(eco_model)
log(eco_model$ors.indiv)
surface.eco(eco_model)
eco:::surface.eco(eco_model)
ecoreg:::surface.eco(eco_model)
ecoreg:::surface.eco(eco_model)
eco_model$aux$pars
alpha <- -0.33
beta_age <- seq(-2, 2, length.out = 8)
beta_educ <- c(seq(0, 4, length.out = 4),
               -1, 0)
beta_ab <- 0.2
beta_owns <- 1.2

eco_model
beta_age
eco_model
log(eco_model$ors.indiv)
eco_model$aux$res$convergence
source("03_ecoreg_analysis.R", echo = T)
ll1
ll2
beta_age
source("02_sim_outcome.R", echo = T)
source("03_ecoreg_analysis.R", echo = T)
ll1
ll2
q()
n
log(eco_model$ors.indiv)
ll1
ll2
eco_cross[1,]
q()
n
ll1
ll2
pars
eco_model$aux$res$par
eco_model$aux$res$par
eco_model$aux$res$counts
eco_model$aux$res$value
eco_model$aux$pars
ll3 # eco_model$aux$pars
ll2
pars
idata[1,]
agglik
pars
agglik
q()
n
mod$icov.labs
idata[,mod$icov.labs]
idata[,mod$icov.labs]
agglik
alpha.c
alpha
beta
q
agglik
idata[1,]
mod$icov.labs
dim(p1)
length(p1)
str(p1)
dim(p2)
length(p2)
dim(p1)
dim(p1)
dim(p2)
length(p2)
mod$icov.labs
p2
agglik
ilik
idata[1,]
table(idata$group)
table(idata[,"group"])
ilik
nrow(ind)
head(ind)
4546/33
alpha.c
alpha
beta_Educ
beta_educ
beta_age
beta
mod$nn
mod$ctx.labs
adata[1,]
alpha
alpha.c
alpha.c
sum(ilik)
ll1
ll2
ll3
sum(ilik)
sum(agglik)
adata[1,]
q
dim(q)
plgos(q)
plogis(q)
plogis(q)[1,]
cross[1,]
eco_cross[1,]
q()
n
mod$whicha
mod
mod$whicha
alpha
q
dim(q)
q
q[1,]
eco_cross
dim(eco_cross)
eco_cross[1,]
tmp
tmp[48,]
adata[,mod$phi.labs, drop = FALSE]
dim(adata[,mod$phi.labs, drop = FALSE])
adata[,mod$phi.labs, drop = FALSE][1,]
tmp
tmp[1,]
beta_educ
length(beta_educ)
adata[,mod$ctx.labs][1,]
alt_q
dim(q)
length(q)
mod$whicha
alpha
q[1,48]
q[1,48]
alpha[c(7,10)]
sum(alpha[c(7,10)])
q[1]
mod$whicha
alpha[
]
length(alpha)
mod$cat.labs
mod$ncateffs
mod$nbineffs
alt_q
alpha
beta_age[-4]
length(beta_age[-4])
alpha
cbind(alpha, c(beta_age[-4], beta_educ[-1])
)
beta_educ
which(beta_educ == 4)
length(beta_educ)
beta_educ
beta_age
alpha
levels(ind$age)
length(levels(ind$age))
levels(ind$education)
whicha
mod$whicha
unlist(mod$whicha)
max(unlist(mod$whicha))
alpha
length(alpha)
eco_categorical
sapply(eco_categorical, ncol)
cats_seq
combs[1,]
combs[48,]
whicha
NULL + 3
aoff
nlevs
cumsum(nlevs-1)
nlevs[1]-1
whicha
mod$whicha
alpha
library(arm)
arm::display(glm_mod)
arm::display(glm_mod)
q()
n
ll
ll1
ll2
eco_model$mod$whicha
source("03_ecoreg_analysis.R", echo = T)
alt_q
q
q[1,48]
ll1
ll2
eco_model$mod$whicha
p
p
qplot
q
q
alpha
p
adata[1,]
eco_model$res
logeco_model$ors.indiv)
log(eco_model$ors.indiv)
cor2
cor1
ll1
ll1
ll2
ll1/ ll2
sum(agglik) / sum(agglik2)
p1
p2
p1
p2
p1
p2
plot(p1, p2)
plot(p1, p2)
abline(a = 0, b= 1)
mean(p1)
mean(p2)
p1
mean(p1)
)
p1
p1[1]
adata[1,"y"]
adata[1,"y"]/adata[1,"N"]
dbinom(adata[1,"y"], adata[1,"N"], p1[1])
dbinom(adata[1,"y"], adata[1,"N"], p1[1], log = TRUE)
p2
p2[1]
dbinom(adata[1,"y"], adata[1,"N"], p2[1], log = TRUE)
dbinom(adata[1,"y"], adata[1,"N"], p1[1], log = TRUE)
dbinom(adata[1,"y"], adata[1,"N"], p1[2], log = TRUE)
dbinom(adata[1,"y"], adata[1,"N"], p2[2], log = TRUE)
p2
mean(p2)
mean(p1)
mean(adata[,"y"]/adata[,"N"])
p1
mean(p1)
mean(p2)
alpha.c
alpha
cbind(alpha, log(eo_model$ors.indiv)[,1])
cbind(alpha, log(eco_model$ors.indiv)[,1])
lik.agg
ecoreg::lik.agg
ecoreg:::lik.agg
ecoreg:::lik.agg == lik.agg
as.character(ecoreg:::lik.agg) == as.character(lik.agg)
lik.agg
ll1
ll2
ll3
ll1
ilik2
sum(ilik2)
sum(ilik)
sum(agglik)
sum(agglik2)
mod$nbin
mod$ncat
mod$model
adata[,"group"]
ecoreg:::tapplysum.fast(agglik, adata[,"group"])
agglik == ecoreg:::tapplysum.fast(agglik, adata[,"group"])
agglik
agglik
eco_model$aux$pars
eco_model$aux$res$par
p1
p2
mean(p1)
mean(p2)
ll1
ll2
p1
ll1
ll2
predprob_wrapper(default_pars, eco_model)$alpha.c
predprob_wrapper(default_pars, eco_model)$alpha
predprob_wrapper(my_pars, eco_model)$alpha
default_pars
length(default_pars)
mod <- eco_model
pars <- default_pars
a1
names(a1)
names(a2)
my_pars
my_pars
a1
a2
p1
ll1
ll2
p1
mean(p1)
mean(p2)
mean(adata[,"y"] / adata[,"N"])
a1
a2
q()
n
eco_model$mod$whicha
q()
n
eco_model$whica
eco_model$whicha
eco_model$mod$whicha
tmp
sapply(tmp, as.numeric)
tmp2 - sapply(tmp, as.numeric)
tmp2 <- sapply(tmp, as.numeric)
tmp2[,2] <- tmp2[,2] + max(tmp2[,1])
tmp2
tmp2 <- tmp2- 1
tmp2
mod$whica
mod$whicha
eco_model$mod$whica
eco_model$mod$whicha
eco_model$mod$whicha[1:10]
tmp2
q()
n
eco_model$mod$whicha
eco_model$ors.indiv
nrow(eco_model$ors.indiv)
mod$nbin
cats
nlevs
aoff
nlevs
aoff
?seq
?seq_len
aoff
nlevs[1]
mod$nbin
cumsum(nlevs - 1)
aoff #
whicha
nlevs
aoff
aoff
alpha
eco_model$ors.indiv
aoff
aoff
aoff
whicha
whicha
whicha
whciha
whicha
combs
whicha
whicha
cats
cats <- nlevs
cats
aoff
aoff
nlevs
nlevs - 1
aoff
aoff
aoff
aoff
whicha
aoff
whicha
whicha
aoff
whicha
combs
nlevs
cats
combs
whicha
whicha
combs
combs
combs
aof
aoff
whicha
aoff
mod$nbin <- 2
   cats <- rep(2, mod$nbin)
          aoff <- seq(0, mod$nbin - 1) # offset into vector of linear covariate effects
aoff
aoff <- mod$nbin + cumsum(nlevs) - lag(nlevs - 1)

aoff
          aoff <- seq(0, mod$nbin - 1) # offset into vector of linear covariate effects

aoff
aoff
          aoff <- seq(0, mod$nbin - 1) # offset into vector of linear covariate effects

aoff
aoff
aoff
aoff
aoff
aoff
nlevs
14 - 2 
14 - 2 +2
aoff
aoff
combs
#aoff <- 
c(rep(1, nbin), nLevs - 1))
c(rep(1, nbin), nLevs - 1)
nbin <- 2
c(rep(1, nbin), nLevs - 1)
nlev
c(rep(1, nbin), nlevs - 1)
aoff
aoff
aoff
aoff
mod$whicha
tmp[c(1, 9(,]
tmp[c(1, 9),]
#tmp[c(1, 9),]
eco_model$ao
eco_model$aoff
#eco_model$mod$
ecoreg
eco
eco_model$aux$aoff
eco_model$mod$nbin
rep(2, 0)
seq(0, -1)
rm(list=ls())
eco_model$aux$aoff
eco_model$aux$whicha
eco_model$mod$whicha
#eco_model$aux$adata
p1[1,]
p1[1]
a1
a2
glm_mod
#p1
ll1
ll2
#coef(eco
pars
my_pars
coef(glm_mod)
eco_model2$lik
eco_model$lik
q()
n
